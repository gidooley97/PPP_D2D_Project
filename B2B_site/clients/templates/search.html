{% extends "base_generic.html" %}

{% block content %}

{% load static %}
<link rel="stylesheet" type="text/css" href="{% static 'detail_style.css' %}">
<body>
  <script src= 
"https://code.jquery.com/jquery-1.12.4.min.js"> 
    </script>
<style> /* NEED TO CREATE FOLDER WITH ALL CSS OF THE PROJECT.
    /* Style the form - display items horizontally */
.form-inline { 
  flex-flow: row wrap;
  align-items: center;
}
/* Add some margins for each label */
.form-inline label {
  margin: 9px 50px 5px 0;
}

/* Style the input fields */
.form-inline input, .form-inline textarea {
  vertical-align: left;
  margin: 5px 10px 5px 0;
  padding: 10px;
  background-color: #fff;
  border: 1px solid #ddd;
  float: right;
}

/* Style the submit button */
.form-inline button {
  padding: 10px 20px;
  background-color: dodgerblue;
  border: 1px solid #ddd;
  color: white;
  float: right;
}

.form-inline button:hover {
  background-color: royalblue;
}

input[type="text"]:disabled, textarea:disabled {
  background: #dddddd;
}

.container {
  border-radius: 5px;
  background-color: #f2f2f2;
  padding: 20px;
}

.col-25 {
  float: left;
  width: 25%;
  margin-top: 6px;
}

.col-75 {
  float: left;
  width: 75%;
  margin-top: 6px;
}

/* Add responsiveness - display the form controls vertically instead of horizontally on screens that are less than 800px wide */
@media screen and (max-width: 800px) {
  .form-inline input {
    margin: 10px 0;
  }

  .form-inline {
    flex-direction: column;
    align-items: stretch;
  }

  .col-25, .col-75, input[type=submit] {
    width: 100%;
    margin-top: 0;
  }
}

</style>

<link rel="stylesheet" type="text/css" href="{% static 'search_style.css' %}">
<div class = "nav" style="padding-top: 0%;padding-left: 2%;">
   
  <div class = "container">
    <p>You can search by using either json or attributes entered in text box, but not both.</p><br>
    <div class = "row">
    <label> 
      <input type="radio" name="inputRadio" checked="checked"
             value="text"> Search by attribute</label> 
    </div>
  <div class = "row">
  <label> 
      <input type="radio" name="inputRadio" 
             value="json"> Search by Json</label> 
  </div>
  <form class = 'form-inline' action="{% url 'search' %}" method="get"  >
    <div class = "row">
    <div class = "col-25">
      <label for="s_bar1">Title:</label>
    </div>
    <div class = "col-75">
      <input  name= "title" class="text" type="text" size="75%" >
    </div>
    </div>
    <div class = "row">
    <div class = "col-25">
      <label for="s_bar2">Author:</label>
    </div>
    <div class = "col-75">
      <input  name= "authors"  class="text"  type="text"  size="75%" >
    </div>
    </div>
    <div class = "row">
      <div class = "col-25">
        <label for="s_bar1">ISBN:</label>
      </div>
      <div class = "col-75">
        <input  name= "isbn" class="text" type="text" size="75%" >
      </div>
      </div>
      <div class = "row">
      <div class = "col-25">
        <label for="s_bar2">Book URL:</label>
      </div>
      <div class = "col-75">
        <input  name= "book_url"  class="text"  type="text"  size="75%" >
      </div>
      </div>
    <div class = "row">
    <input class="text" type="submit" value="Search" >
    </div>
  </form>
 
  <form class = 'form-inline' action="{% url 'search' %}" method="get" >
    <div class= "row">
      <div class="col-25">
        <label>Json:</label>
      </div>
      <div class="col-75">
        <textarea class="json" id="myTextArea" cols=76 rows=15 placeholder="Search Json" ></textarea>
      </div>
    </div>
  <div class= "row">
    <input class="json" type="submit" value="Search"  style = "padding: 1%; bottom: 8px; right: 16px;">
  </div>  
    
</form>
<script type="text/javascript"> 
  $(document).ready(function() { 
      $(".json").prop('disabled', true);
      $('input[type="radio"]').click(function() { 
          var inputValue = $(this).attr("value");
          if (inputValue == "text") {
            $(".json").prop('disabled', true);
            $(".text").prop('disabled', false);

          }
          else if (inputValue == "json") {
            $(".text").prop('disabled', true);
            $(".json").prop('disabled', false);
          }
      }); 
  }); 
</script>
</div>

  <h2>Search Results</h2 >
    <div class="col-sm-10 text-right">

      {% if is_paginated %}
      <div class="pagination">
          <span class="page-links">
              {% if page_obj.has_previous %}
                  <a href="?{{request.META.QUERY_STRING }}&page={{ page_obj.previous_page_number }}">previous</a>
              {% endif %}
              <span class="page-current">
                  Page {{ page_obj.number }} of {{ page_obj.paginator.num_pages }}
              </span>
              {% if page_obj.has_next %}
                  <a href="?{{request.META.QUERY_STRING }}&page={{ page_obj.next_page_number }}">next</a>
              {% endif %}
          </span>
      </div>
      {% endif %}
      </div>
</div>
  <ul class="col-sm-10" style="border:1px solid #042a7a; width: 80%; margin-left: 10%; margin-bottom: 3%;" >

  {% for book in object_list %}
    <li>
      <button class="button button2 text-right" ><a href="{{ book.book_url }}">Book Url</a></button> </span>
      <span> {{ book.book_title }} -  {{ book.subtitle }} by {{ book.authors }} &nbsp;
    </li>
  {% endfor %}
  </ul> 
  
<div class="col-sm-10 text-right">

{% if is_paginated %}
<div class="pagination pull ">
    <span class="page-links">
        {% if page_obj.has_previous %}
            <a href="?{{request.META.QUERY_STRING }}&page={{ page_obj.previous_page_number }}">previous</a>
        {% endif %}
        <span class="page-current">
            Page {{ page_obj.number }} of {{ page_obj.paginator.num_pages }}
        </span>
        {% if page_obj.has_next %}
            <a href="?{{request.META.QUERY_STRING }}&page={{ page_obj.next_page_number }}">next</a>
        {% endif %}
    </span>
</div>
{% endif %}

{% endblock %}
</div>

</body>